<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
                    xmlns:controls="clr-namespace:PersonalFinance.Ui.Shared.Controls"
                    xmlns:converters="clr-namespace:PersonalFinance.Ui.Shared.Converters">
    <Style x:Key="PrimaryActionButtonStyle" TargetType="ui:Button" BasedOn="{StaticResource {x:Type ui:Button}}">
        <Setter Property="Appearance" Value="Primary" />
    </Style>

    <Style x:Key="SecondaryActionButtonStyle" TargetType="ui:Button" BasedOn="{StaticResource {x:Type ui:Button}}">
        <Setter Property="Appearance" Value="Secondary" />
    </Style>

    <Style x:Key="IconButtonStyle" TargetType="ui:Button" BasedOn="{StaticResource {x:Type ui:Button}}">
        <Setter Property="Appearance" Value="Transparent" />
        <Setter Property="Padding" Value="6" />
        <Setter Property="Width" Value="34" />
        <Setter Property="Height" Value="34" />
        <Setter Property="HorizontalAlignment" Value="Center" />
        <Setter Property="VerticalAlignment" Value="Center" />
    </Style>

    <Style x:Key="DangerIconButtonStyle" TargetType="ui:Button" BasedOn="{StaticResource IconButtonStyle}">
        <Setter Property="Foreground" Value="{DynamicResource SystemFillColorCriticalBrush}" />
    </Style>

    <Style x:Key="PagingButtonStyle" TargetType="ui:Button" BasedOn="{StaticResource SecondaryActionButtonStyle}">
        <Setter Property="MinWidth" Value="76" />
    </Style>

    <Style x:Key="ListRowContainerStyle" TargetType="Border">
        <Setter Property="Background" Value="{DynamicResource ControlFillColorDefaultBrush}" />
        <Setter Property="BorderBrush" Value="{DynamicResource ControlStrokeColorDefaultBrush}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="CornerRadius" Value="{DynamicResource ControlCornerRadius}" />
        <Setter Property="Padding" Value="12,10" />
        <Setter Property="SnapsToDevicePixels" Value="True" />
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="{DynamicResource ControlFillColorSecondaryBrush}" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="ColorPillStyle" TargetType="Rectangle">
        <Setter Property="Width" Value="20" />
        <Setter Property="Height" Value="20" />
        <Setter Property="RadiusX" Value="3" />
        <Setter Property="RadiusY" Value="3" />
        <Setter Property="Stroke" Value="{DynamicResource ControlStrokeColorDefaultBrush}" />
        <Setter Property="StrokeThickness" Value="1" />
    </Style>

    <Style x:Key="FormLabelTextStyle" TargetType="TextBlock">
        <Setter Property="FontSize" Value="12" />
        <Setter Property="Foreground" Value="{DynamicResource TextFillColorSecondaryBrush}" />
    </Style>

    <Style x:Key="FormTextBoxStyle" TargetType="ui:TextBox">
        <Setter Property="Margin" Value="0,6,0,0" />
    </Style>

    <Style x:Key="FormComboBoxStyle" TargetType="ComboBox">
        <Setter Property="Margin" Value="0,6,0,0" />
    </Style>

    <Style x:Key="ValidationMessageTextStyle" TargetType="TextBlock">
        <Setter Property="Foreground" Value="{DynamicResource SystemFillColorCriticalBrush}" />
        <Setter Property="FontSize" Value="12" />
        <Setter Property="Margin" Value="0,4,0,0" />
    </Style>

    <converters:ColorHexToBrushConverter x:Key="ColorHexToBrushConverter" />
    <converters:ColorHexEqualsConverter x:Key="ColorHexEqualsConverter" />
    <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />

    <Style x:Key="HexColorRadioStyle" TargetType="RadioButton">
        <Setter Property="Width" Value="24" />
        <Setter Property="Height" Value="24" />
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Padding" Value="0" />
        <Setter Property="Focusable" Value="False" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="RadioButton">
                    <Grid>
                        <Polygon x:Name="Hexagon"
                                 Points="12,0 24,6 24,18 12,24 0,18 0,6"
                                 Fill="{TemplateBinding Background}"
                                 Stroke="{DynamicResource ControlStrokeColorDefaultBrush}"
                                 StrokeThickness="1" />
                        <Polygon x:Name="SelectionRing"
                                 Points="12,0 24,6 24,18 12,24 0,18 0,6"
                                 Fill="Transparent"
                                 Stroke="{DynamicResource TextFillColorPrimaryBrush}"
                                 StrokeThickness="0" />
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Hexagon" Property="Stroke" Value="{DynamicResource TextFillColorPrimaryBrush}" />
                        </Trigger>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter TargetName="Hexagon" Property="Stroke" Value="{DynamicResource TextFillColorPrimaryBrush}" />
                            <Setter TargetName="SelectionRing" Property="StrokeThickness" Value="2" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="controls:HexColorPicker">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="controls:HexColorPicker">
                    <Grid>
                        <ui:Button Style="{StaticResource SecondaryActionButtonStyle}"
                                   Command="{TemplateBinding OpenDialogCommand}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <Rectangle Grid.Column="0"
                                           Width="18"
                                           Height="18"
                                           RadiusX="4"
                                           RadiusY="4"
                                           Fill="{Binding SelectedColorHex, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorHexToBrushConverter}}" />
                                <TextBlock Grid.Column="1"
                                           Margin="8,0,0,0"
                                           Text="{Binding SelectedColorHex, RelativeSource={RelativeSource TemplatedParent}}"
                                           Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                                <ui:SymbolIcon Grid.Column="2"
                                               Margin="8,0,0,0"
                                               Symbol="ChevronDown24" />
                            </Grid>
                        </ui:Button>
                        <Popup IsOpen="{Binding IsDialogOpen, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                               PlacementTarget="{Binding RelativeSource={RelativeSource AncestorType=Window}}"
                               Placement="Center"
                               AllowsTransparency="True"
                               PopupAnimation="Fade"
                               StaysOpen="True">
                            <Grid Width="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=Window}}"
                                  Height="{Binding ActualHeight, RelativeSource={RelativeSource AncestorType=Window}}"
                                  Background="#F0202020">
                                <Border Padding="16"
                                        Background="{DynamicResource CardBackground}"
                                        BorderBrush="{DynamicResource CardBorderBrush}"
                                        BorderThickness="1"
                                        CornerRadius="8"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center">
                                    <StackPanel>
                                        <TextBlock Text="{DynamicResource Categories.ColorPickerTitle}" FontSize="16" FontWeight="SemiBold" />
                                        <ItemsControl ItemsSource="{Binding PaletteMain, RelativeSource={RelativeSource TemplatedParent}}" Margin="0,12,0,0">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <controls:HexagonHoneycombPanel ItemWidth="24" ItemHeight="24" HorizontalSpacing="0" VerticalSpacing="0" RowLengths="5,6,7,8,9,8,7,6,5" />
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <RadioButton Style="{StaticResource HexColorRadioStyle}"
                                                                 Width="24" Height="24"
                                                                 Background="{Binding Converter={StaticResource ColorHexToBrushConverter}}"
                                                                 GroupName="{Binding DialogGroupName, RelativeSource={RelativeSource AncestorType=controls:HexColorPicker}}"
                                                                 Command="{Binding RelativeSource={RelativeSource AncestorType=controls:HexColorPicker}, Path=SelectColorCommand}"
                                                                 CommandParameter="{Binding}">
                                                        <RadioButton.IsChecked>
                                                            <MultiBinding Converter="{StaticResource ColorHexEqualsConverter}" Mode="OneWay">
                                                                <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="SelectedColorHex" />
                                                                <Binding />
                                                            </MultiBinding>
                                                        </RadioButton.IsChecked>
                                                    </RadioButton>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                        <Grid Margin="0,12,0,0">
                                            <ui:Button Style="{StaticResource SecondaryActionButtonStyle}"
                                                       HorizontalAlignment="Right"
                                                       Command="{Binding CloseDialogCommand, RelativeSource={RelativeSource TemplatedParent}}"
                                                       Content="{DynamicResource Common.Cancel}" />
                                        </Grid>
                                    </StackPanel>
                                    </Border>
                            </Grid>
                        </Popup>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>
